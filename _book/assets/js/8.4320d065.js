(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{366:function(t,v,_){t.exports=_.p+"assets/img/ab_tomcat.743fa458.jpeg"},367:function(t,v,_){t.exports=_.p+"assets/img/ab_smart-servlet.a68c6a80.jpeg"},368:function(t,v,_){t.exports=_.p+"assets/img/ab_tomcat_150.d847e5e4.jpeg"},369:function(t,v,_){t.exports=_.p+"assets/img/ab_smart-servlet_150.7bc9fab4.jpeg"},408:function(t,v,_){"use strict";_.r(v);var a=_(7),e=Object(a.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"评测数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#评测数据"}},[t._v("#")]),t._v(" 评测数据")]),t._v(" "),v("h2",{attrs:{id:"一、测试结果"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、测试结果"}},[t._v("#")]),t._v(" 一、测试结果")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("规范清单")]),t._v(" "),v("th",[t._v("Tomcat 9")]),t._v(" "),v("th",[t._v("smart-servlet")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Servlet Spec")]),t._v(" "),v("td",[t._v("4.0")]),t._v(" "),v("td",[t._v("3.1")])]),t._v(" "),v("tr",[v("td",[t._v("Jsp Spec")]),t._v(" "),v("td",[t._v("2.3")]),t._v(" "),v("td",[t._v("N/A")])])])]),t._v(" "),v("p",[t._v("在相同的测试工程下：")]),t._v(" "),v("ul",[v("li",[t._v("smart-servlet 性能表现结果比 tomcat 高出 50%~100 以上 。")]),t._v(" "),v("li",[t._v("tomcat 压测期间 CPU 使用率高于 40%，smart-servlet 压测时低于 40% 。")]),t._v(" "),v("li",[t._v("tomcat 线程数随并发数递增，上限 200；smart-servlet 线程数固定，不受并发数影响 。")]),t._v(" "),v("li",[t._v("内存开销两者基本持平。")])]),t._v(" "),v("blockquote",[v("p",[t._v("评测在不同的测试方式、测试环境下会有不同的表现。本文结论仅供参考，请以自己的实际测试结果为准。")])]),t._v(" "),v("h2",{attrs:{id:"二、压测过程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、压测过程"}},[t._v("#")]),t._v(" 二、压测过程")]),t._v(" "),v("p",[t._v("测试方式：先执行 3 次压测，使服务器完成预热，每次压测前都确保端口充分释放。")]),t._v(" "),v("h3",{attrs:{id:"_2-1-apachebench-压测"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-apachebench-压测"}},[t._v("#")]),t._v(" 2.1 ApacheBench 压测")]),t._v(" "),v("h4",{attrs:{id:"_2-1-1-并发量-100"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-并发量-100"}},[t._v("#")]),t._v(" 2.1.1 并发量：100")]),t._v(" "),v("p",[v("strong",[t._v("测试命令")])]),t._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[t._v("ab "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-k")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c100")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" http://127.0.0.1:8080/examples/servlets/servlet/HelloWorldExample\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[v("strong",[t._v("测试结果")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("tomcat / smart-servlet")]),t._v(" "),v("th",[t._v("Requests per second [count/sec]")]),t._v(" "),v("th",[t._v("Transfer rate [Kbytes/sec]")]),t._v(" "),v("th",[t._v("累计YGC")]),t._v(" "),v("th",[t._v("累计FGC")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("第 1 轮")]),t._v(" "),v("td",[t._v("18536.55 / 37129.34")]),t._v(" "),v("td",[t._v("11689.08 / 22806.99")]),t._v(" "),v("td",[t._v("18 / 22")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 2 轮")]),t._v(" "),v("td",[t._v("21194.69 / 32753.81")]),t._v(" "),v("td",[t._v("13365.34 / 20119.28")]),t._v(" "),v("td",[t._v("23 / 28")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 3 轮")]),t._v(" "),v("td",[t._v("22588.81 / 36523.28")]),t._v(" "),v("td",[t._v("14244.43 / 22434.71")]),t._v(" "),v("td",[t._v("27 / 34")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 4 轮")]),t._v(" "),v("td",[t._v("20171.81 / 35668.17")]),t._v(" "),v("td",[t._v("12720.25 / 21909.45")]),t._v(" "),v("td",[t._v("32 / 42")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 5 轮")]),t._v(" "),v("td",[t._v("21957.96 / 30439.92")]),t._v(" "),v("td",[t._v("13846.64 / 18697.96")]),t._v(" "),v("td",[t._v("37 / 52")]),t._v(" "),v("td",[t._v("1 / 0")])])])]),t._v(" "),v("p",[v("strong",[t._v("压测小结：")])]),t._v(" "),v("ul",[v("li",[t._v("从 ab 产生的结果来看 smart-servlet 的性能比 tomcat 高出 50%~100% 。")]),t._v(" "),v("li",[t._v("而且从下图可以看到压测期间 tomcat 线程数增长至 118，而 smart-servlet 始终稳定在 23。")]),t._v(" "),v("li",[t._v("tomcat 不能很好的支持 http1.0 keep-alive。ab采用了的协议是 Http1.0，压测 tomcat 过程中发现实际建立的连接数超过了500个，而 smart-servlet 稳定在100个。")])]),t._v(" "),v("p",[v("img",{attrs:{src:_(366),alt:""}})]),t._v(" "),v("p",[v("img",{attrs:{src:_(367),alt:""}})]),t._v(" "),v("h4",{attrs:{id:"_2-1-2-并发量-150"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-并发量-150"}},[t._v("#")]),t._v(" 2.1.2 并发量：150")]),t._v(" "),v("p",[v("strong",[t._v("测试命令")])]),t._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[t._v("ab "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-k")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c150")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" http://127.0.0.1:8080/examples/servlets/servlet/HelloWorldExample\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[v("strong",[t._v("测试结果")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("Tomcat / smart-servlet")]),t._v(" "),v("th",[t._v("Requests per second [count/sec]")]),t._v(" "),v("th",[t._v("Transfer rate [Kbytes/sec]")]),t._v(" "),v("th",[t._v("累计YGC")]),t._v(" "),v("th",[t._v("累计FGC")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("第 1 轮")]),t._v(" "),v("td",[t._v("18402.97 / 40874.22")]),t._v(" "),v("td",[t._v("11605.02 / 25107.31")]),t._v(" "),v("td",[t._v("30 / 16")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 2 轮")]),t._v(" "),v("td",[t._v("25367.06 / 45381.93")]),t._v(" "),v("td",[t._v("15996.65 / 27876.21")]),t._v(" "),v("td",[t._v("37 / 19")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 3 轮")]),t._v(" "),v("td",[t._v("25935.43 / 41616.07")]),t._v(" "),v("td",[t._v("16355.01 / 25563.00")]),t._v(" "),v("td",[t._v("44 / 21")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 4 轮")]),t._v(" "),v("td",[t._v("26399.91 / 44049.76")]),t._v(" "),v("td",[t._v("16647.90 / 27057.91")]),t._v(" "),v("td",[t._v("52 / 25")]),t._v(" "),v("td",[t._v("1 / 0")])]),t._v(" "),v("tr",[v("td",[t._v("第 5 轮")]),t._v(" "),v("td",[t._v("24079.55 / 49325.96")]),t._v(" "),v("td",[t._v("15184.70 / 30298.86")]),t._v(" "),v("td",[t._v("61 / 29")]),t._v(" "),v("td",[t._v("1 / 0")])])])]),t._v(" "),v("p",[v("strong",[t._v("压测小结：")])]),t._v(" "),v("ul",[v("li",[t._v("在 150 的并发下 smart-servlet 的性能比 tomcat 高出 50%~100% 。")]),t._v(" "),v("li",[t._v("tomcat 线程数增长值 169，smart-servlet 维持23个不变。")])]),t._v(" "),v("p",[v("img",{attrs:{src:_(368),alt:""}})]),t._v(" "),v("p",[v("img",{attrs:{src:_(369),alt:""}})]),t._v(" "),v("h4",{attrs:{id:"_2-1-3-并发量-1000"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-并发量-1000"}},[t._v("#")]),t._v(" 2.1.3 并发量：1000")]),t._v(" "),v("p",[v("strong",[t._v("测试命令")])]),t._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[t._v("ab "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-k")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c1000")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" http://127.0.0.1:8080/examples/servlets/servlet/HelloWorldExample\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[v("strong",[t._v("测试结果")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("smart-servlet")]),t._v(" "),v("th",[t._v("Requests per second [count/sec]")]),t._v(" "),v("th",[t._v("Transfer rate [Kbytes/sec]")]),t._v(" "),v("th",[t._v("累计YGC")]),t._v(" "),v("th",[t._v("累计FGC")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("第 1 轮")]),t._v(" "),v("td",[t._v("37633.03")]),t._v(" "),v("td",[t._v("23116.38")]),t._v(" "),v("td",[t._v("15")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("第 2 轮")]),t._v(" "),v("td",[t._v("35776.23")]),t._v(" "),v("td",[t._v("21975.83")]),t._v(" "),v("td",[t._v("17")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("第 3 轮")]),t._v(" "),v("td",[t._v("39916.91")]),t._v(" "),v("td",[t._v("24519.27")]),t._v(" "),v("td",[t._v("19")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("第 4 轮")]),t._v(" "),v("td",[t._v("38895.61")]),t._v(" "),v("td",[t._v("23891.93")]),t._v(" "),v("td",[t._v("21")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("第 5 轮")]),t._v(" "),v("td",[t._v("39318.90")]),t._v(" "),v("td",[t._v("24151.94")]),t._v(" "),v("td",[t._v("22")]),t._v(" "),v("td",[t._v("0")])])])]),t._v(" "),v("p",[t._v("压测小结：在此并发量下 tomcat 失败率太高，不再进行评测。")])])}),[],!1,null,null,null);v.default=e.exports}}]);