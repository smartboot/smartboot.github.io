---
author: ä¸‰åˆ€
article: false
permalink: /smart-socket/quickstart.html
title: ğŸš©äº”åˆ†é’Ÿä¸Šæ‰‹
date: 2022-10-26 23:12:06
---

<script>
if(typeof checkStar !== 'undefined'){
   checkStar("smartboot","smart-socket");
}
</script>
å¦‚æœä½ è¿˜æ˜¯ä¸€åæ–°æ‰‹ï¼Œæœ¬æ–‡å°†å¸¦ç€ä½ ç”¨äº”åˆ†é’Ÿæ—¶é—´å®Œæˆä¸€å¥—å®Œæ•´çš„é€šä¿¡æœåŠ¡ã€‚
å½“ç„¶ï¼Œæƒ³è¦è¾¾åˆ°ç²¾é€šçš„ç¨‹åº¦ï¼Œè¿˜éœ€åœ¨å·¥ä½œä¸­å¤šå¤šå®è·µã€‚

## ç¬¬1åˆ†é’Ÿï¼šåˆ›å»ºå·¥ç¨‹
æˆ‘ä»¬æ¨èé‡‡ç”¨ IDEA åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ã€‚ä½ å¯ä»¥ä¸ºè¯¥é¡¹ç›®å–ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„åå­—ï¼Œä½†æ„å»ºæ–¹å¼æœ€å¥½æ˜¯ Mavenï¼ˆå› ä¸ºæˆ‘ä¸æ“…é•¿Gradleï¼Œé‡åˆ°é—®é¢˜å¯èƒ½æ— æ³•ä¸ºä½ æä¾›å¸®åŠ©ï¼‰ã€‚

å¦‚æœä½ çš„ JDK ç‰ˆæœ¬æ˜¯ 8~10ï¼Œå¯é€‰æ‹© smart-socket 1.5.x çš„ç‰ˆæœ¬ï¼›å¦‚æœ JDK ç‰ˆæœ¬æ˜¯ 11~21ï¼Œéœ€é€‰æ‹© 1.6.x çš„ç‰ˆæœ¬ã€‚
![](./img/create_project.png)

## ç¬¬2åˆ†é’Ÿï¼šå¼•å…¥ Maven ä¾èµ–

æ‰“å¼€ pom.xml æ–‡ä»¶ï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹ã€‚
```xml
<dependencies>
    <dependency>
        <groupId>io.github.smartboot.socket</groupId>
        <artifactId>aio-core</artifactId>
        <version>1.5.52</version>
    </dependency>
</dependencies>
```

å¦‚æœç½‘ç»œä¸å¥½åŠ è½½ä¾èµ–è¾ƒæ…¢ï¼Œå¯ä»¥è¯•ç€å°† maven ä»“åº“è°ƒæˆé˜¿é‡Œäº‘é•œåƒã€‚
```xml
<repositories>
    <repository>
        <id>alimaven</id>
        <name>aliyun maven</name>
        <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
    </repository>
</repositories>
```

## ç¬¬3åˆ†é’Ÿï¼šå®šä¹‰é€šä¿¡åè®®
è¿™é‡Œæä¾›çš„ç¤ºä¾‹æ˜¯ä¸€ç§ç®€å•çš„å­—ç¬¦ä¸²é€šä¿¡åè®®ï¼Œä»…ä½œæ•ˆæœæ¼”ç¤ºã€‚å®é™…åœºæ™¯ä¸­è¿˜éœ€æ ¹æ®é€šä¿¡åŒæ–¹çº¦å®šçš„åè®®å®ç°ç¼–è§£ç ç®—æ³•ã€‚
```java
import org.smartboot.socket.Protocol;
import org.smartboot.socket.transport.AioSession;

import java.nio.ByteBuffer;

public class StringProtocol implements Protocol<String> {

    @Override
    public String decode(ByteBuffer readBuffer, AioSession session) {
        int remaining = readBuffer.remaining();
        if (remaining < Integer.BYTES) {
            return null;
        }
        readBuffer.mark();
        int length = readBuffer.getInt();
        if (length > readBuffer.remaining()) {
            readBuffer.reset();
            return null;
        }
        byte[] b = new byte[length];
        readBuffer.get(b);
        readBuffer.mark();
        return new String(b);
    }
}
```

## ç¬¬4åˆ†é’Ÿï¼šå¯åŠ¨æœåŠ¡ç«¯
æœåŠ¡ç«¯çš„é€šè¿‡`System.out`æ‰“å°å®¢æˆ·ç«¯ä¼ è¾“è¿‡æ¥çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œå¹¶å°†è¯¥å†…å®¹åŸæ ·ä¼ å›è‡³å®¢æˆ·ç«¯ã€‚
```java
import org.smartboot.socket.MessageProcessor;
import org.smartboot.socket.transport.AioQuickServer;
import org.smartboot.socket.transport.WriteBuffer;

import java.io.IOException;

public class StringServer {

    public static void main(String[] args) throws IOException {
        MessageProcessor<String> processor = (session, msg) -> {
            System.out.println("receive from client: " + msg);
            WriteBuffer outputStream = session.writeBuffer();
            try {
                byte[] bytes = msg.getBytes();
                outputStream.writeInt(bytes.length);
                outputStream.write(bytes);
            } catch (IOException e) {
                e.printStackTrace();
            }
        };

        AioQuickServer server = new AioQuickServer(8888, new StringProtocol(), processor);
        server.start();
    }
}
```
`try-catch`ä¸­å…ˆåè°ƒç”¨`writeInt`ã€`write`æ˜¯ä¸€ç§åè®®ç¼–ç æ‰‹æ³•ï¼Œä¹Ÿæ˜¯ä»äº‹é€šä¿¡å¼€å‘å¿…é¡»è¦æŒæ¡çš„æŠ€èƒ½ã€‚

## ç¬¬5åˆ†é’Ÿï¼šå¯åŠ¨å®¢æˆ·ç«¯
å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å»ºç«‹TCPè¿æ¥åï¼Œä¾¿å‘å…¶å‘é€`hello smart-socket`ï¼Œå½“æ”¶åˆ°æœåŠ¡ç«¯çš„å“åº”æ¶ˆæ¯æ—¶ï¼Œé€šè¿‡`MessageProcessor`çš„å®ç°ç±»è¿›è¡Œæ§åˆ¶å°æ‰“å°ã€‚
```java
import org.smartboot.socket.MessageProcessor;
import org.smartboot.socket.transport.AioQuickClient;
import org.smartboot.socket.transport.AioSession;
import org.smartboot.socket.transport.WriteBuffer;

import java.io.IOException;

public class StringClient {

    public static void main(String[] args) throws IOException {
        MessageProcessor<String> processor = (session, msg) -> System.out.println("receive from server: " + msg);
        AioQuickClient client = new AioQuickClient("localhost", 8888, new StringProtocol(), processor);
        AioSession session = client.start();
        WriteBuffer writeBuffer = session.writeBuffer();
        byte[] data = "hello smart-socket".getBytes();
        writeBuffer.writeInt(data.length);
        writeBuffer.write(data);
        writeBuffer.flush();
    }
}
```

## æœ€å
æ­å–œä½ ï¼Œç°åœ¨ä½ å·²ç»æˆåŠŸå®ç°äº†ä¸€å¥—é€šä¿¡æœåŠ¡ã€‚å¦‚æœè¿‡ç¨‹ä¸­é‡åˆ°é˜»ç¢æ²¡èƒ½åœ¨ 5 åˆ†é’Ÿå†…å®Œæˆï¼Œä¸å¦¨å¥½å¥½æ¶ˆåŒ–ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼Œå†ä»å¤´è¯•ä¸€éã€‚

åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘æ›´åŠ å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ï¼š
- å¦‚ä½•å¤„ç†å¼‚å¸¸ï¼Ÿ
- å¦‚ä½•å¤„ç†è¶…æ—¶ï¼Ÿ
- å¦‚ä½•å¤„ç†ç²˜åŒ…å’Œæ‹†åŒ…ï¼Ÿ
- å¦‚ä½•å¤„ç†å¿ƒè·³ï¼Ÿ
- å¦‚ä½•å¤„ç†æ–­çº¿é‡è¿ï¼Ÿ
- å¦‚ä½•å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ
- å¦‚ä½•å¤„ç†å¹¶å‘ï¼Ÿ
- å¦‚ä½•å¤„ç†çº¿ç¨‹å®‰å…¨ï¼Ÿ
- å¦‚ä½•å¤„ç†æ€§èƒ½ä¼˜åŒ–ï¼Ÿ

å¦‚æœä½ æ­£é‡åˆ°è¿™æ–¹é¢çš„å›°éš¾ï¼Œå¯ä»¥è€ƒè™‘æˆ‘ä»¬æä¾›çš„ [ä»˜è´¹å’¨è¯¢æœåŠ¡](../../service.md)ã€‚